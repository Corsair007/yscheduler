<!--TODO validate -->
<div class="container">
	<div id="wizard">
		<ul>
			<li><a href="#tab1" data-toggle="tab"><span class="label">1</span>部署设置</a></li>
			<li><a href="#tab2" data-toggle="tab"><span class="label">2</span>基本设置</a></li>
			<li><a href="#tab3" data-toggle="tab"><span class="label">3</span> 其他设置</a></li>
		</ul>
		<form id="form" role="form" action="/task/create" method="post" class="form-horizontal">
			<div class="tab-content well">
				<div class="tab-pane" id="tab1">
					<fieldset>
						<legend>部署设置</legend>
						<div class="form-group">
							<label for="type" class="col-sm-2">作业类型*</label>
							<div class="col-sm-5">
								<select id="type" name="type" class="form-control" required="required"> #foreach($type in $types)
									<option value='$type.id'>$type.name</option> #end
								</select>
							</div>
						</div>

						<div class="form-group">
							<label for="agent" class="col-sm-2">部署的机器</label>
							<div class="col-sm-5">
								<select name="agent" class="single chosen-select" data-placeholder="选择部署作业的机器ip"> #foreach($agent in $agents)
									<option value="$agent.value">$agent.name</option> #end
								</select>
							</div>
						</div>

					</fieldset>
				</div>
				<div class="tab-pane" id="tab2">
					<fieldset>
						<legend>基本设置</legend>
						<div class="form-group">
							<label for="name" class="col-sm-2">名称*</label>
							<div class="col-sm-5">
								<input type="text" id="name" name="name" class="form-control" required="required"
									placeholder="作业的名称，可以作为被依赖的对象，不可修改">
							</div>
						</div>

						<div class="form-group">
							<label for="crontab" class="col-sm-2">调度表达式</label>
							<div class="col-sm-5">
								<input type="text" id="crontab" name="crontab" class="form-control" required="required"
									placeholder="0 0 0 * * ?">
							</div>
						</div>

						<div class="form-group">
							<label for="crontab" class="col-sm-2">命令*</label>
							<div class="col-sm-5">
								<input type="text" id="command" name="command" class="form-control" required="required" placeholder="作业执行的命令">
							</div>
						</div>

						<div class="form-group">
							<label for="owner" class="col-sm-2">创建人*</label>
							<div class="col-sm-5">
								<select name="owner" class="single chosen-select" data-placeholder="选择创建人用户名"> #foreach($user in $users)
									<option value="$user.value" #if($user.name== 'jason')selected #end>$user.name</option> #end
								</select>
							</div>
						</div>

						<div class="form-group">
							<label for="description" class="col-sm-2">描述</label>
							<div class="col-sm-5">
								<input type="text" id="description" name="description" class="form-control" placeholder="作业的用途">
							</div>
						</div>
					</fieldset>
				</div>
				<div class="tab-pane" id="tab3">
					<fieldset>
						<legend>其他设置</legend>
						<div class="form-group">
							<label for="timeout" class="col-sm-2">执行超时时间（分钟）</label>
							<div class="col-sm-1">
								<input type="number" id="timeout" name="timeout" class="form-control" value="60">
							</div>
						</div>

						<div class="form-group">
							<label for="retryTimes" class="col-sm-2">重试次数</label>
							<div class="col-sm-1">
								<input type="number" id="retryTimes" name="retryTimes" class="form-control" required="required" value = '0'>
							</div>
						</div>

						<div class="form-group">
							<label for="type" class="col-sm-2">依赖任务</label>
							<div class="col-sm-5">
								<select multiple name="dependency" class="multiple chosen-select form-control" data-placeholder="选择依赖的任务名称">
									#foreach($task in $tasks)
									<option value="$task.value">$task.name</option> #end
								</select>
							</div>
						</div>

						<div class="form-group">
							<label for="readers" class="col-sm-2">可读用户</label>
							<div class="col-sm-5">
								<select multiple name="readers" class="multiple chosen-select form-control" data-placeholder="选择有读权限用户" >
									<option value=""></option> #foreach($user in $users)
									<option value="$user.value">$user.name</option> #end
								</select>
							</div>
						</div>

						<div class="form-group">
							<label for="writers" class="col-sm-2">可写用户</label>
							<div class="col-sm-5">
								<select multiple name="writers" class="multiple chosen-select form-control" data-placeholder="选择有写权限用户">
									#foreach($user in $users)
									<option value="$user.value">$user.name</option> #end
								</select>
							</div>
						</div>

						<div class="form-group">
							<label for="notice" class="col-sm-2">关注用户</label>
							<div class="col-sm-5">
								<select multiple name="notice" class="multiple chosen-select form-control" data-placeholder="选择告警要通知的用户">
									#foreach($user in $users)
									<option value="$user.value">$user.name</option> #end
								</select>
							</div>
						</div>

						<div class="form-group">
							<label class="col-sm-2">状态</label>
							<div class="col-sm-5">
								<label> <input name="running" class="ace ace-checkbox-1" type="checkbox" checked="checked"> <span
									class="lbl"> 启用调度</span>
								</label>
							</div>
						</div>
					</fieldset>
				</div>
			</div>

			<ul class="pager bwizard-buttons">
				<li class="button-previous"><a href="#">← 上一步</a></li>
				<li class="button-finish" style="cursor: pointer;" id="submit" data-loading-text="提交中.."><a class='CLICKABLE'>提交</a></li>
				<li class="button-next"><a href="#">下一步 →</a></li>
			</ul>
		</form>

	</div>

</div>
<div id="confirm" class="modal hide fade">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal">&times;</button>
		<h3 id="id_header"></h3>
	</div>
	<div class="modal-body">
		<p id="id_body"></p>
	</div>
	<div class="modal-footer"></div>
</div>

